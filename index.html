<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Gestionnaire de collection PokÃ©mon">
    <meta name="theme-color" content="#9333ea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PokÃ©mon TCG">
    <title>Ma Collection PokÃ©mon</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- CSS personnalisÃ© -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-purple-50">
    
    <!-- Header fixe -->
    <header class="main-header">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <h1 class="text-lg md:text-2xl font-bold text-purple-900 cursor-pointer hover:opacity-80 transition" onclick="showTab('home')">
                    ğŸ´ Ma Collection PokÃ©mon
                </h1>
                
                <!-- Menu burger (mobile uniquement) -->
                <div class="burger-menu" onclick="toggleMobileNav()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto main-content p-4 md:p-6">

        <!-- Navigation Desktop -->
        <div class="desktop-nav flex gap-2 md:gap-4 mb-4 md:mb-6 items-center flex-wrap justify-center">
            <button onclick="showTab('home')" class="px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold transition bg-white text-gray-700 hover:bg-gray-100 text-sm md:text-base">
                ğŸ  Accueil
            </button>
            
            <div class="dropdown">
                <button onclick="toggleDropdown('collection-menu')" class="px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold transition bg-white text-gray-700 hover:bg-gray-100 text-sm md:text-base">
                    ğŸ“¦ Collection â–¼
                </button>
                <div id="collection-menu" class="dropdown-content">
                    <button onclick="showTab('add-collection')">â• Ajout produit collection</button>
                    <button onclick="showTab('my-collection')">ğŸ“‹ Ma collection</button>
                </div>
            </div>
            
            <div class="dropdown">
                <button onclick="toggleDropdown('vente-menu')" class="px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold transition bg-white text-gray-700 hover:bg-gray-100 text-sm md:text-base">
                    ğŸ’° Vente â–¼
                </button>
                <div id="vente-menu" class="dropdown-content">
                    <button onclick="showTab('add-sale')">â• Ajouter une carte</button>
                    <button onclick="showTab('sale-list')">ğŸ“‹ Liste des produits</button>
                    <button onclick="showTab('dashboard')">ğŸ“Š Tableau de bord</button>
                </div>
            </div>

            <div class="dropdown">
                <button onclick="toggleDropdown('stock-menu')" class="px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold transition bg-white text-gray-700 hover:bg-gray-100 text-sm md:text-base">
                    ğŸ“¦ Stock â–¼
                </button>
                <div id="stock-menu" class="dropdown-content">
                    <button onclick="showTab('stock-add')">â• Renseignement</button>
                    <button onclick="showTab('stock-list')">ğŸ“‹ Liste du stock</button>
                    <button onclick="showTab('stock-lots')">ğŸ“¦ Liste des lots</button>
                </div>
            </div>

            <button onclick="showTab('card-search')" class="px-4 md:px-6 py-2 md:py-3 rounded-lg font-semibold transition bg-white text-gray-700 hover:bg-gray-100 text-sm md:text-base">
                ğŸ” Recherche
            </button>
        </div>

        <!-- Bouton d'installation PWA -->
        <button id="install-btn" style="display: none;" class="fixed top-20 right-6 bg-purple-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-purple-700 font-semibold flex items-center gap-2 z-50">
            ğŸ“± Installer l'application
        </button>

        <!-- Tous les contenus des onglets seront chargÃ©s ici par le JavaScript -->
        <div id="app-content"></div>

    </div>

    <!-- Navigation Mobile (menu burger) -->
    <div id="mobile-nav" class="mobile-nav" onclick="closeMobileNavOnOverlay(event)">
        <div class="mobile-nav-content" onclick="event.stopPropagation()">
            <div class="mobile-nav-header">
                <h2 class="text-xl font-bold text-purple-900">Menu</h2>
                <button onclick="toggleMobileNav()" class="mobile-nav-close">Ã—</button>
            </div>
            
            <div onclick="navigateMobile('home')" class="mobile-nav-item">
                ğŸ  Accueil
            </div>
            
            <div class="mobile-nav-item">
                ğŸ“¦ Collection
                <div class="mobile-nav-submenu">
                    <div onclick="navigateMobile('add-collection')" class="mobile-nav-subitem">
                        â• Ajout produit collection
                    </div>
                    <div onclick="navigateMobile('my-collection')" class="mobile-nav-subitem">
                        ğŸ“‹ Ma collection
                    </div>
                </div>
            </div>
            
            <div class="mobile-nav-item">
                ğŸ’° Vente
                <div class="mobile-nav-submenu">
                    <div onclick="navigateMobile('add-sale')" class="mobile-nav-subitem">
                        â• Ajouter une carte
                    </div>
                    <div onclick="navigateMobile('sale-list')" class="mobile-nav-subitem">
                        ğŸ“‹ Liste des produits
                    </div>
                    <div onclick="navigateMobile('dashboard')" class="mobile-nav-subitem">
                        ğŸ“Š Tableau de bord
                    </div>
                </div>
            </div>
            
            <div class="mobile-nav-item">
                ğŸ“¦ Stock
                <div class="mobile-nav-submenu">
                    <div onclick="navigateMobile('stock-add')" class="mobile-nav-subitem">
                        â• Renseignement
                    </div>
                    <div onclick="navigateMobile('stock-list')" class="mobile-nav-subitem">
                        ğŸ“‹ Liste du stock
                    </div>
                    <div onclick="navigateMobile('stock-lots')" class="mobile-nav-subitem">
                        ğŸ“¦ Liste des lots
                    </div>
                </div>
            </div>
            
            <div onclick="navigateMobile('card-search')" class="mobile-nav-item">
                ğŸ” Recherche de cartes
            </div>
        </div>
    </div>

    <!-- Footer fixe -->
    <footer class="main-footer">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <!-- Liens de navigation -->
            <div class="footer-links">
                <a onclick="showTab('home')" class="footer-link">ğŸ  Accueil</a>
                <a onclick="showTab('add-collection')" class="footer-link">ğŸ“¦ Collection</a>
                <a onclick="showTab('add-sale')" class="footer-link">ğŸ’° Vente</a>
                <a onclick="showTab('stock-add')" class="footer-link">ğŸ“Š Stock</a>
                <a onclick="showTab('card-search')" class="footer-link">ğŸ” Recherche</a>
                <a onclick="showTab('mentions-legales')" class="footer-link">âš–ï¸ Mentions lÃ©gales</a>
            </div>
            
            <!-- Actions rapides -->
            <div class="flex justify-center gap-6 items-center my-3">
                <button onclick="exportData()" class="text-gray-600 hover:text-green-600 transition text-xl" title="Exporter">
                    ğŸ“¥
                </button>
                <label class="text-gray-600 hover:text-blue-600 transition cursor-pointer text-xl" title="Importer">
                    ğŸ“¤
                    <input type="file" id="footer-import-file" accept=".json" class="hidden" onchange="importData(event)">
                </label>
                <button onclick="toggleDarkMode()" class="text-gray-600 hover:text-yellow-600 transition text-xl" title="Mode sombre" id="footer-dark-toggle">
                    ğŸŒ™
                </button>
            </div>
            
            <!-- Copyright -->
            <div class="footer-copyright">
                Â© 2025 Gardjax - Gestionnaire de Collection PokÃ©mon TCG
            </div>
        </div>
    </footer>

    <!-- Script principal -->
    <script src="script.js"></script>
</body>
</html>
